---
title: kafka 常用命令
toc: true
date: 2024-07-08 14:33:09
tags: Kafka
categories: 技术
---

**查看所有 topic**
* `./kafka-topics.sh --zookeeper=10.5.208.13:2181 --list`

**创建topic——注意: 必须指定分区和副本, 否则会报错; 不同的版本需要指定的参数不同; Replication 不能超过 brokers 数量**
* `bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 --partitions 3 --topic testA`
* `bin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 3 --partitions 3 --topic testA`

**删除topic**
* `./kafka-topics.sh --zookeeper=10.5.208.13:2181 --topic xxx --delete`

**查看topic属性**
* `./kafka-topics.sh --describe --zookeeper=10.5.208.13:2181 --topic xxx`

**topic增加分区**
* `./kafka-topics.sh --alter --zookeeper=10.5.208.13:2181 --topic xxx --partitions 10`
    > 分区数增加到10个, 如果topic的分区增加, 则分区逻辑或消息顺序将受到影响, 会引起rebalance操作 

**生产数据**
* `./kafka-console-producer.sh --broker-list localhost:9092 --topic TCP_6666`

**消费数据**
* `./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic first --from-beginning`

**重置偏移量**
* `./kafka-consumer-groups.sh --bootstrap-server=10.5.208.13:9092 --execute --reset-offsets --topic=xxx --group=testPlatform-local-pha  --to-earliest`

**显示所有消费者**
* `./kafka-consumer-groups.sh --bootstrap-server localhost:9092 --list`

**查看Broker磁盘信息kafka-log-dirs.sh**
* `/home/master/kafka/bin/kafka-log-dirs.sh --bootstrap-server localhost:9092 --describe --topic-list vuln`

* `/home/master/kafka/bin/kafka-configs.sh --list --bootstrap-server localhost:9092`

* `/home/master/kafka/bin/kafka-topics.sh --zookeeper localhost:2181 --describe --topic vuln`

**查询 kafka 消费者组的信息**
* `kafka=/home/master/kafka/`

* `$kafka/bin/kafka-consumer-groups.sh --bootstrap-server=localhost:9092 --describe --group "groupName"`
